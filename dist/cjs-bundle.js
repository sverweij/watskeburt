var a=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var C=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},w=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of S(e))!N.call(t,o)&&o!==n&&a(t,o,{get:()=>e[o],enumerable:!(r=y(e,o))||r.enumerable});return t};var R=t=>w(a({},"__esModule",{value:!0}),t);var B={};C(B,{convert:()=>v});module.exports=R(B);var s=require("os"),_=new RegExp("^(?<changeType>[ACDMRTUXB])(?<similarity>[0-9]{3})?[ 	]+(?<name>[^ 	]+)[ 	]*(?<newName>[^ 	]+)?$"),x=new RegExp("^(?<stagedChangeType>[ ACDMRTUXB?!])(?<unStagedChangeType>[ ACDMRTUXB?!])[ 	]+(?<name>[^ 	]+)(( -> )(?<newName>[^ 	]+))?$"),E={A:"added",C:"copied",D:"deleted",M:"modified",R:"renamed",T:"type changed",U:"unmerged",B:"pairing broken"," ":"unmodified","?":"untracked","!":"ignored"};function i(t){return E[t]||"unknown"}function A(t){let e=t.match(x),n={};if(e){let r=i(e.groups.stagedChangeType),o=i(e.groups.unStagedChangeType);n.changeType=r==="unmodified"?o:r,e.groups.newName?(n.name=e.groups.newName,n.oldName=e.groups.name):n.name=e.groups.name}return n}function U(t){let e=t.match(_),n={};return e&&(n.changeType=i(e.groups.changeType),e.groups.similarity&&(n.similarity=Number.parseInt(e.groups.similarity,10)),e.groups.newName?(n.name=e.groups.newName,n.oldName=e.groups.name):n.name=e.groups.name),n}function m(t){return t.split(s.EOL).filter(Boolean).map(A).filter(({changeType:e})=>Boolean(e))}function g(t){return t.split(s.EOL).filter(Boolean).map(U).filter(({changeType:e})=>Boolean(e))}var u=require("child_process");function D(t){return t instanceof Buffer?t.toString("utf8"):t}function l(t,e,n){let r=n("git",t,{cwd:process.cwd(),env:process.env});if(r.status===0)return D(r.stdout);throw new Error(e[r.status]||`unknown error: ${r.status}`)}function d(t=u.spawnSync){let e={129:`'${process.cwd()}' does not seem to be a git repository`};return l(["status","--porcelain"],e,t)}function T(t,e=u.spawnSync){let n={128:`revision '${t}' unknown `,129:`'${process.cwd()}' does not seem to be a git repository`};return l(["diff",t,"--name-status"],n,e)}var h=require("path");function c(t,e=[".js",".ts",".mjs",".cjs"],n=["modified","added","renamed","copied","untracked"]){return`^(${t.filter(o=>n.includes(o.changeType)).map(({name:o})=>o).filter(o=>e.includes((0,h.extname)(o))).join("|")})$`}function f(t){return JSON.stringify(t,null,2)}var L={regex:c,json:f,object:t=>t},O="object";function p(t,e){return L[e||O](t)}function v(t,e){let n=g(T(t)),r=e||{};return r.trackedOnly||(n=n.concat(m(d()).filter(({changeType:o})=>o==="untracked"))),p(n,r.outputType)}0&&(module.exports={convert});
